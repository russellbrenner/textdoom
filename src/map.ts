/**
 * Map data - 0 is empty, 1+ are wall types
 * Player starts at the first empty space found
 */

export const MAP_WIDTH = 24;
export const MAP_HEIGHT = 24;

// Hand-crafted level with interesting geometry
export const MAP: number[][] = [
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,3,3,0,0,0,0,1],
  [1,0,0,0,2,0,0,0,2,0,0,0,0,0,3,0,0,0,3,0,0,0,0,1],
  [1,0,0,0,2,0,0,0,2,0,0,0,0,0,3,0,0,0,3,0,0,0,0,1],
  [1,0,0,0,2,0,0,0,2,0,0,0,0,0,3,0,0,0,3,0,0,0,0,1],
  [1,0,0,0,2,2,0,2,2,0,0,0,0,0,3,3,0,3,3,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,4,0,0,4,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,0,0,0,5,5,5,5,5,5,0,0,0,0,6,6,6,6,6,6,0,0,0,1],
  [1,0,0,0,5,0,0,0,0,5,0,0,0,0,6,0,0,0,0,6,0,0,0,1],
  [1,0,0,0,5,0,0,0,0,5,0,0,0,0,6,0,0,0,0,6,0,0,0,1],
  [1,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,1],
  [1,0,0,0,5,5,5,5,5,5,0,0,0,0,6,6,6,6,6,6,0,0,0,1],
  [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
];

/** Check if a position is a wall */
export function isWall(x: number, y: number): boolean {
  const mapX = Math.floor(x);
  const mapY = Math.floor(y);
  if (mapX < 0 || mapX >= MAP_WIDTH || mapY < 0 || mapY >= MAP_HEIGHT) {
    return true;
  }
  return MAP[mapY][mapX] !== 0;
}

/** Get wall type at position (0 if empty) */
export function getWallType(x: number, y: number): number {
  const mapX = Math.floor(x);
  const mapY = Math.floor(y);
  if (mapX < 0 || mapX >= MAP_WIDTH || mapY < 0 || mapY >= MAP_HEIGHT) {
    return 1;
  }
  return MAP[mapY][mapX];
}
